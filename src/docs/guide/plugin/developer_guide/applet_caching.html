<html>
<head>
<title>Applet Caching and Installation in Java Plug-in</title>

</head>

<body bgcolor="#FFFFFF">
<hr>
<h1>Applet Caching</h1>
<hr>
<form name="form1" >
  <select name="menu1" onChange="Eminem_jumpMenu('parent',this,1)">
    <SCRIPT SRC="menu_script.js" language="JavaScript"></SCRIPT>
  </select>
</form>
<p>This section covers the following topics:</p>
<ul>
  <li><a href="#option">Caching Option</a> 
    <ul>
      <li><a href="#cache_archive">cache_archive</a></li>
      <li><a href="#cache_version">cache_version</a></li>
      <li><a href="#cache_archive_ex">cache_archive_ex</a></li>
      <li><a href="#algorithm">Cache Update Algorithm</a></li>
    </ul>
  </li>
  <li><a href="#security">Security</a></li>
  <li><a href="#limitations">Known Issues</a></li>
</ul>
<h2><a name="option"></a>Caching Option</h2>
<p>Once an applet it is cached, it no longer needs to be downloaded when referenced 
  again. Thus performance is improved.&nbsp; </p>
<p> This release introduces an alternative form of applet caching, allowing an 
  applet deployer to decide if an applet should be <i>sticky</i>, i.e., placed 
  in a disk cache created and controlled by Java Plug-in which the browser cannot 
  overwrite. The only time a sticky applet gets downloaded after caching is when 
  it is updated on the server; otherwise the applet is always available for fast 
  loading. Applets providing core business applications should be made sticky 
  to improve startup performance. 
<p> This new feature is activated by including the new <code>cache_archive</code>,<tt> 
  </tt><code>cache_version</code><tt> </tt>, and <code>cache_archive_ex</code> 
  values in the <code>OBJECT/EMBED</code> tag as described below.
<p>
<table summary="layout" width="90%" border="1" cellpadding="5" align="center" bgcolor="#FFFFCC" cellspacing="0">
  <tr>
    <td>
      <h2><u>Note</u> </h2>
      <p><code>.jar</code> files specified with the <code>archive</code> attribute 
        also get cached in this sticky cache. 
    </td>
  </tr>
</table>
<p>
<h3> <b><a name="cache_archive"></a>cache_archive</b></h3>
<p> The <tt>cache_archive</tt> attribute contains a list of the files to be cached: 
<blockquote>
  <pre>
&lt;PARAM NAME=&quot;cache_archive&quot; VALUE=&quot;a.jar,b.jar,c.jar&quot;&gt;
</pre>
</blockquote>
<p> Like the <tt>archive</tt> attribute in the <tt>APPLET</tt> tag, the list of 
  <code>.jar</code> files in the <tt>cache_archive</tt> attribute do not contain 
  the full URL, but are always downloaded from the <tt>codebase</tt> . 
<h3><b><a name="cache_version"></a>cache_version</b></h3>
<p>The <tt>cache_version</tt> is an optional attribute. If used, it contains a 
  list of file versions to be cached:</p>
<blockquote> 
  <pre>&lt;PARAM NAME=&quot;cache_version&quot; VALUE=&quot;1.2.0.1, 2.1.1.2, 1.1.2.7&quot;&gt;</pre>
</blockquote>
<p>Each version number is in the form <code>xxxx.xxxx.xxxx.xxxx</code>, where 
  <code>x</code> is a hexadecimal number. Each version number corresponds to a 
  respective <code>.jar</code> file in the <tt>cache_archive</tt>.</p>
<h3><a name="cache_archive_ex"></a>cache_archive_ex</h3>
<p><span style="FONT-SIZE: 12pt; mso-bidi-font-size: 10.0pt">In order to allow 
  pre-loading of <code>.jar</code> files, the HTML parameter <code>cache_archive_ex</code><i> 
  </i>can be used. This parameter allows you to specify whether the <code>.jar</code> 
  file needs to be pre-loaded; optionally the version of the <code>.jar</code> 
  file can also be specified. <code>VALUE</code> for <code>cache_archive_ex</code> 
  has the following format:</span></p>
<blockquote>
  <p><span style="FONT-SIZE: 12pt; mso-bidi-font-size: 10.0pt"><code>VALUE="&lt;<i>jar_file_name</i>&gt;;&lt;preload(optional)&gt;;&lt;<i>jar_file_version</i>(optional)&gt;,&lt;<i>jar_file_name</i>&gt;; 
    &lt;preload(optional)&gt;;&lt;<i>jar_file_version</i>(optional)&gt;, ...&quot;</code></span></p>
</blockquote>
<p><span style="FONT-SIZE: 12pt; mso-bidi-font-size: 10.0pt">The optional tags 
  <code>preload</code> and <i><code>jar_file_version</code></i> can appear after 
  the <i><code>jar_file_name</code></i> in any order seperated by the delimiter 
  &quot;;&quot;. &quot;<code>,</code>&quot; separates multiple entries.</span></p>
<p>The following shows how these tags might be used in an HTML page:</p>
<table summary="layout" width="90%" border="0" cellpadding="5" align="center" bgcolor="#CCCCCC">
  <tr>
    <td><tt>&lt;OBJECT ....</tt> &gt;<br>
      <font face="Courier New" size="2">&lt;PARAM NAME="archive</font><font face="Courier New" size="3">"</font><font face="Courier New" size="2"> 
      VALUE="a.jar"&gt;<br>
      </font><font color="#0000ff"><tt><font color="#000000">&lt;PARAM NAME="cache_archive" 
      VALUE="b.jar, c.jar, d.jar"&gt;<br>
      &lt;PARAM NAME="cache_version" VALUE="0.0.0.1, 0.0.2A.1, 0.3D.22.FFFE"&gt;<br>
      &lt;PARAM NAME="cache_archive_ex" VALUE="applet.jar;preload, util.jar;preload;0.9.0.AC1, 
      tools.jar;0.9.8.7F"&gt;</font><br>
      </tt></font><tt>&lt;/OBJECT&gt;</tt></td>
  </tr>
</table>
<p>In the above example, <code>a.jar</code> is specified in <code>archive</code>, 
  whereas <code>b.jar</code>, <code>c.jar</code> and <code>d.jar</code> are specified 
  in <code>cache_archive</code>. The versions are also specified for <code>b.jar</code>, 
  <code>c.jar</code>, and <code>d.jar</code> as <code>0.0.0.1</code>, <code>0.0.2A.1</code>, 
  and <code>0.3D.22.FFFE</code>, respectively. In <code>cache_archive_ex</code>, 
  <code>applet.jar</code> is specified to be pre-loaded. <code>util.jar</code> 
  is also specified to be pre-loaded but along with the version. For <code>tools.jar</code>, 
  only version is specified.</p>
<p>Java Plug-In doesn't compare the versions if they are not specified for all 
  the <code>.jar</code> files specified in HTML parameter <code>cache_archive</code>. 
  If <code>cache_archive</code> is used without <code>cache_version</code>, the 
  <code>.jar</code> files specified in <code>cache_archive</code> are treated 
  no differently than the <code>.jar</code> files specified in HTML parameter 
  <code>archive</code>. Similar treatment is given to <code>.jar</code> files 
  specified in <code>cache_archive_ex</code> when preload and version options 
  are not provided.</p>
<p>Class files and resources will be searched in the following order from the 
  <code>.jar</code> files specified by the HTML parameters </p>
<ol>
  <li><code>cache_archive_ex</code> </li>
  <li><code>cache_archive</code> </li>
  <li><code>archive</code> </li>
</ol>
<h3><a name="algorithm"></a>Applet Caching Update Algorithm</h3>
<p>By default, without the <tt>cache_version</tt> attribute, applet caching will 
  be updated if:</p>
<ul>
  <li>The <tt>cache_archive</tt> has not been cached before, or</li>
  <li>The "Last-Modified" value of the <tt>cache_archive</tt> on the web server 
    is newer than the one stored locally in the applet cache, or</li>
  <li>The "Content-Length" of the <tt>cache_archive</tt> on the web server is 
    different from the one stored locally in the applet cache.&nbsp;</li>
</ul>
<p>However, in some situations, the "Last-Modified" value returned from the web 
  server through HTTP/HTTPS may not reflect the actual version of the applets. 
  For example, if the web server crashes and all the files are restored, the <tt>cache_archive</tt> 
  may have a different modification date on the server. Even if the <tt>cache_archive</tt> 
  has not been updated, it will still force all the Java Plug-in clients to download 
  the <tt>cache_archive</tt> again.</p>
<p>To strongly enforce the version update, it is recommended that the applet deployer 
  use the <tt>cache_version</tt> attribute. </p>
<p>If <code>cache_version</code> is used, applet caching will be updated if the 
  <tt>cache_version </tt>for the<tt> cache_archive </tt>is larger than the one 
  stored locally in the applet cache. Note that the version number is used for 
  triggering an update; there is no actual version number attached to the <code>.jar</code> 
  file on the web server. In fact, unless version is used to trigger an update, 
  it is possible the applet on the web server could be updated without the applet 
  in cache_archive.</p>
<p><tt>Using cache_version </tt>eliminates the need to connect to the web server 
  to obtain "Modification-Date" and "Content-Length" of the <tt>cache_archive</tt>. 
  In most cases this will speed up performance.</p>
<h2><a name="security"></a>Security</h2>
<p>Although sticky applets are cached locally, they will still conform to the 
  security policy defined by their original codebase and signer.</p>
<h2><a name="limitations"></a>Known Issues</h2>
<ul>
  <li>Caching of the <code>.jar</code> files specified in the manifest's <tt>Class-Path</tt> 
    variable using Java Plug-in's cache is currently not supported.<br>
  </li>
  <li>The path specified in the <tt>cache_archive</tt> must be a relative URL 
    to the applet's <code>codebase</code>. Full URLs are not supported in <tt>cache_archive</tt>.</li>
  <li>If you get the &quot;<code>java.io.IOException: Caching not supported for</code> 
    ...&quot; exception, this is because Java Plug-in was unable to get the expiration 
    and last-modification dates for a given JAR file from the web server. If the 
    Java Plug-in cannot get this information, there is no point in caching since 
    the JAR file will be downloaded every time it is used. Even with this exception, 
    however, the applet should work fine. This exception is merely informative.<br>
  </li>
</ul>
<p>&nbsp;</p>
</body>
</html>
