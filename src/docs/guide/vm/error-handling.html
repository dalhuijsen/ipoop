<html><head><title>Error Reporting</title></head>
<body bgcolor="white">
<TABLE summary="layout" BORDER="0" WIDTH="100%">
<TR>
<TD width=60>
<IMG SRC="../../images/javalogo52x88.gif" ALT="Java" width=52>
</TD>


<TD align=center>

<h1>Error Reporting</h1>
</TD>

<TD align=right width=60>
&nbsp;
</TD>
</TR>
</TABLE>

<HR SIZE=3 NOSHADE>

When the Java Virtual Machine (JVM) detects a crash 
in native code such as JNI code written by the developer or when 
the JVM itself crashes, it will print debug information about the 
crash.  This error message normally will include information such 
as the function name, library name, source-file name and line number 
at which the error occurred. (Currently, information about file name 
and line number are available only available on Microsoft Windows 
platforms.) For an example of a message emitted by the error handler, 
see <a href="error-example.txt">JNI Error example</a>.
<p>
The information provided by the new error-reporting mechanism will 
allow developers to more easily and efficiently debug their applications. 
If an error message indicates a problem in the JVM code itself, it 
will allow a developer to submit a more accurate and helpful bug 
report.
<p>
Sometimes the error-reporting mechanism won't be able to determine 
the information that might be helpful in locating 
the source of a crash.  To get the most out of the error handler, 
developers should be aware of the following guidelines and limitations.
<p>
<b>Compile in debug mode</b><br>
<blockquote>
In some circumstances, the error-reporting mechanism won't be able 
to determine symbol names. The most common reason for this is that 
the binary code that crashed was not compiled in debug mode and 
therefore doesn't have symbol tables.  Developers should compile 
their code in debug mode to ensure that it contains the necessary 
debug information.  In Visual Studio, for example, this means 
choosing "Debug" rather than "Release" as the project's build mode. 
When using gcc or cc on Linux or on the Solaris<sup><font size="-2">TM</font>
</sup> operating environment, compile using the <tt>-g</tt> command-line 
option.
</blockquote>
<p>
<b>Non-exported functions</b>
<blockquote>
Even without debug information in the binary code, the error handler 
can still print the function name of the crash site. However, the 
function name might not be correct if the problematic function is 
not "exported" from the dynamic library. On Linux and Solaris, all functions are exported 
except those declared static. On Microsoft Windows platforms, 
<i>no</i> functions are exported unless explicitly declared so 
(using <tt>JNIEXPORT</tt> or <tt>__declspec(dllexport)</tt>). 
</blockquote>
<p>
<b>Visual Studio limitation on Windows 98 and Windows NT</b><br>
<blockquote>
On Windows 98 and Windows NT platforms, the error handler 
uses the system's <tt>imagehlp.dll</tt> file to help determine the 
function name, source file, and line number of a crash site. 
(Windows 2000 and Windows ME use two files, <tt>imagehlp.dll</tt> and 
<tt>debughlp.dll</tt> to perform this task.) However, the 
<tt>imagehlp.dll</tt> file in Windows 98 and Windows NT does 
not work well with binary code and DLLs generated by Visual Studio 6.0. 
<p>
This problem may cause the error handler to generate error messages 
with incorrect information about the function name, source file and 
line number of the crash site, though other information in the error 
message will be correct.
</blockquote>
<!-- Body text ends here -->
<!-- ============================================================== -->
<HR SIZE=3 NOSHADE>

<TABLE summary="layout" BORDER="0" WIDTH="100%">
<TR VALIGN=TOP>

<TD>
<P><FONT SIZE="-2">
   Copyright &#169; 2002
   <A HREF="http://www.sun.com/">Sun Microsystems, Inc.</A>
    All Rights Reserved.</FONT></P>
</TD>

<TD ALIGN=RIGHT>
   <IMG SRC="../../images/sunlogo64x30.gif" ALT="Sun">
</TD>

</TR>
</TABLE>
</body>
</html>
